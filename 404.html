<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
		<style>
			* {margin: 0; padding: 0; border: 0; font-family: arial; font-size: 18px; line-height: 18px; list-style: none; text-decoration: none; color: #000;}
			.alt{text-indent: -9999px; font-size: 1px;}
			body{overflow-x: hidden; overflow-y: scroll; margin-bottom: 30px; background: #efefef;}
			body > #header > form[name='form'] {position: relative;}
			body > #header > form[name='form'] > fieldset > #util{position: relative; display: table; width: 100%; height: 57px; z-index: 2;}
			body > #header > form[name='form'] > fieldset > #util > textarea{display: none;}
			body > #header > form[name='form'] > fieldset > #util > select{position: absolute; padding-bottom: 15px; right: 0; top: 12px; bottom: inherit; width: 22px; height: 33px; font-size: 25px; outline: none; -webkit-appearance: none; background-color: rgba(0,0,0,0);}
			body > #header > form[name='form'] > fieldset > #util > select::-ms-expand {display: none;}
			body > #header > form[name='form'] > fieldset > #util > label[for='switch'] {display: table-cell; margin:1em 0; width: 100%; vertical-align: middle;}
			body > #header > form[name='form'] > fieldset > #util > label#tag:not(:empty) {display: table-cell; width:65px; min-width:65px; padding-right: 0.5em;}
			body > #header > form[name='form'] > fieldset > #util > label#tag:not(:empty):after {content: ""; position: absolute;left: 0; bottom: 0; width: 100%;}
			body > #header > form[name='form'] > fieldset > #util > label#tag:not(:empty) ~ label:before {content: "+"; position: relative; cursor: pointer; color: #f00;}
			body > #header > input[name='switch'] {display: none;}
			body > #header > input[name='switch']:checked + form[name='form'] > fieldset > #util > label#tag:not(:empty)~label{width:4px;}
			body > #header > input[name='switch']:checked + form[name='form'] > fieldset > #util > label#tag:not(:empty) ~ label:before {content: "-"; top:-2px; }
			body > #header > input[name='switch']:checked + form[name='form'] > fieldset > #util > label#tag:not(:empty) ~ input[name='content'] {display: table-cell;}
			body > #header > form[name='form'] > fieldset > #util > #tag {position: relative; overflow: hidden; display: table-cell; padding: 1em 0; font-weight: bold; width: 100%; line-height: 20px; white-space: nowrap; vertical-align: top; cursor:text;}
			body > #header > form[name='form'] > fieldset > #util > #tag br{display: none;}
			body > #header > form[name='form'] > fieldset > #util > #tag *{display: inline;}
			body > #header > form[name='form'] > fieldset > #util > #tag:empty:focus~strong{opacity: 0.4; z-index: -1;}
			body > #header > form[name='form'] > fieldset > #util > #tag:empty~strong {display: block;}
			body > #header > form[name='form'] > fieldset > #util > #tag:empty~strong h1{display: inline;}
			body > #header > form[name='form'] > fieldset > #util > input[name='content'] {display: none; padding: 1em 0.5em; width: 100%; font-weight: 100; vertical-align: top; line-height: 20px; background-color: rgba(0,0,0,0); box-sizing: border-box;}
			body > #header > form[name='form'] > fieldset > #util > input[name='content']:focus{background-color: rgba(0,0,0,0);}
			body > #header > form[name='form'] > fieldset > #util > input[name='keyword'] {position: absolute; width: 0; height: 0; opacity: 0;}
			body > #header > form[name='form'] > fieldset > #util > strong {display: none; position: absolute; margin: auto; top: 0; bottom: 0; left: 0; height: 1em; font-size: 24px; z-index: -1;}
			body > #header > form[name='form'] > fieldset > #util > strong > h1 > *{font-size: 24px; font-weight: bold; color:#f00;}
			body > #header > form[name='form'] > fieldset > #util > strong > h1 > select{position: relative; top:-4px; width:150px; background-color: transparent;}
			body > #header > form[name='form'] > fieldset > #util > strong > .placeholder {white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-left: 15px; font-weight: normal; font-style: normal; font-size: 1rem; line-height: 24px;}
			body > #header > form[name='form'] > fieldset > #shortcut {position: absolute; top: 45px; left: 0; width: 100%; box-sizing: border-box; background-color: rgba(240, 240, 240, 0.9); z-index: 1;}
			body > #header > form[name='form'] > fieldset > .dim {position: fixed; display: block; left: 0; top: 0; width: 100%; height: 100%; z-index: 0;}
			body > #header > form[name='form'] > fieldset > #shortcut:empty + .dim {display: none;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete:empty{padding: 0;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete{padding:10px;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > input {display: block; position: absolute; width: 0; height: 0; opacity: 0; white-space: nowrap;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a:hover,
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a:hover > span,
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a:focus,
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a:focus > span,
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > input:checked + label > a,
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > input:checked + label > a > span {color: #f00;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label {display: block;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a{display:block; white-space: nowrap; text-overflow: ellipsis; overflow:hidden; line-height: 1.5;}
			body > #header > form[name='form'] > fieldset > #shortcut > .autocomplete > label > a > span {font-weight: bolder;}
			body > #aside > #infobox {position: relative; display: table; margin-bottom: 10px; width: 100%; padding: 15px 20px; background: #fff; box-sizing: border-box; box-shadow: 0px 0px 4px rgba(30, 30, 30, 0.2);}
			body > #aside > #infobox:empty {margin: 0; padding: 0; border: 0; box-shadow: 0;}
			body > #aside > #infobox > dl {display: table-cell; vertical-align: top;}
			body > #aside > #infobox > dl:empty {padding: 0;}
			body > #aside > #infobox > dl > dt#infobox_title {clear: none;}
			body > #aside > #infobox > dl > dt#infobox_title > img {display: block; margin-bottom: 10px; max-width: 130px; max-height: 200px;}
			body > #aside > #infobox > dl > dt#infobox_title ~ dt {clear: none;}
			body > #aside > #infobox > dl > dt {clear: both; float: left; margin-right: 15px;}
			body > #aside > #infobox > dl > dt,
			body > #aside > #infobox > dl > dd{font-size: 0.7em; line-height: 1.6;}
			body > #aside > #infobox > dl > dd {display: table; word-break: keep-all;}
			body > #aside > #infobox > dl > dd > a[href] {font-weight: bold; color: #006621;}
			body > #aside > #infobox > dl > dd > a {font-size: 1em;}
			body > #aside > #infobox > h2 {display: table-cell; width: 160px; padding-right: 20px; vertical-align: top;}
			body > #aside > #more_images{display: none;}
			body > #aside > #infobox > h2:empty{display: none;}
			body > #aside > #infobox > label[for='more_images']{position: absolute; overflow: hidden; right: 0; bottom: 0; width: 20px; height: 20px; text-align: center; background: red; color: #fff; line-height: 20px; z-index: 0; cursor: pointer;}
			body > #aside > #infobox > label[for='more_images']:before{content:"+";}
			body > #aside > #infobox > label[for='more_images'] span{display: block; font-size:1px; text-indent: -9999px;}
			body > #aside > #infobox > h2 > label > input {display: none;}
			body > #aside > #infobox > h2 > label ~ label input {margin-left: 5px;}
			body > #aside > #infobox > h2 img {display: none; width: 100%;}
			body > #aside > #infobox > h2 input:checked + img {display: block;}
			body > #aside > #more_images:checked ~ #infobox dl{display: none;}
			body > #aside > #more_images:checked ~ #infobox {display: block;}
			body > #aside > #more_images:checked ~ #infobox > label[for='more_images']{line-height: 17px;}
			body > #aside > #more_images:checked ~ #infobox > label[for='more_images']:before{content:"-";}
			body > #aside > #more_images:checked ~ #infobox h2:empty {height: 0; border: 0;}
			body > #aside > #more_images:checked ~ #infobox h2{display: block; margin:0 -5px; width: 100%;}
			body > #aside > #more_images:checked ~ #infobox h2 label~label {position: relative; display: inline-block; width: 20%; text-align: center; box-sizing: border-box;}
			body > #aside > #more_images:checked ~ #infobox h2 label input {position: absolute; left: 0; top: 0; width: 100%; height: 100%; opacity: 0;}
			body > #aside > #more_images:checked ~ #infobox > h2 img {display: inline-block; padding:0 5px; width: auto; max-width: 100%; max-height: 100px; box-sizing: border-box;}
			body > #aside > #keywords {overflow: hidden; margin-bottom: 17px; height: 17px;}
			body > #aside > #keywords:empty {margin-bottom: 0; height: 0;}
			body > #aside > #keywords > div {overflow-x: scroll; overflow-y: hidden; white-space: nowrap;}
			body > #aside > #keywords > div * {display: inline; margin-right: 2em; font-size: 13px; vertical-align: top; color: #006621;}
			body > #aside > #keywords select{display: none;}
			body > #aside > #keywords input{display: none;}
			body > #aside > #keywords label{color: #ddd;}
			body > #aside > #keywords input:checked+label{display: none;}
			body > #aside > #keywords input:checked+label[for='timeline'],
			body > #aside > #keywords input:checked+label[for='wikinews'],
			body > #aside > #keywords input:checked+label+select{display: inline; font-weight: bold; color:#000;}
			body > #aside > #keywords [for='nav'],
			body > #aside > #keywords #nav{border-bottom:1px solid;}
			body.loading > #main{background: url(/img/load.gif) no-repeat bottom center;}
			body > #main > #news > ul > li{position: relative; margin-bottom:10px; height:62px; box-sizing:border-box; box-shadow: 0px 0px 4px rgba(30, 30, 30, 0.2); background-color: #000;}
			body > #main > #news > ul > li > a:before{content: ""; position: absolute; left: -62px; border:6px solid #fff; width:50px; height:50px; background:#fff url("/img/logo.gif") no-repeat 0 -2000px; opacity: 1;}
			body > #main > #news > ul > li > a:after{content: ""; position: absolute; margin: auto; left: 0; top: 0; bottom: 0; width: 0px; height: 0px; border-top: 6px solid transparent; border-bottom: 6px solid transparent; border-left: 6px solid white;}
			body > #main > #news > ul > li > a{position: absolute; left: 62px; right: 0; top: 0; bottom: 0; padding-left: 15px; line-height: 62px; font-size: 14px; color:#fff;}
			body > #main > div:empty{margin-bottom: 0 !important;}
			body > #main {padding-bottom: 40px;}
			body > #main > #threads > form{position: relative; overflow:hidden; margin-bottom: 10px; background: #fff; box-shadow: 0px 0px 4px rgba(30, 30, 30, 0.2);}
			/*body > #main > #threads > form.root:after{content:""; position: absolute;}*/
			body > #main > #threads > form [id*='url']{overflow:hidden; margin-top: 5px;}
			body > #main > #threads > form img{display: block; width:100%;}
			body > #main > #threads > form .thumnail{position: absolute; left: 0; top: -140%; width:100%; z-index: 0; cursor: pointer;}
			body > #main > #threads > form .thumnail img{min-width: 580px;}
			body > #main > #threads > form iframe{display: none; margin-bottom: 10px; width:100%;}
			body > #main > #threads > form input{display: none;}
			body > #main > #threads > form .info{position: relative; display: inline-block; min-width: 100px; padding: 10px; z-index: 1;}
			body > #main > #threads > form .info .profile_img{float: left; width: 36px; height: 36px;}
			body > #main > #threads > form .profile{}
			body > #main > #threads > form .profile .name{margin-left: 10px; line-height:20px;}
			body > #main > #threads > form .date{display: table-caption; margin-left: 10px; font-size:12px; white-space: nowrap;}
			body > #main > #threads > form .content{position: relative; line-height: 1; z-index:0;}
			body > #main > #threads > form .txt{display: block; padding: 10px; padding-top: 0; font-size: 14px; line-height: 18px;}
			body > #main > #threads > form .txt:before{content: ""; position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 0;}
			body > #main > #threads > form .thumnail+.content{background-color: rgba(0,0,0,0.5);}
			body > #main > #threads > form .thumnail+.content *{color: #fff;}
			body > #main > #threads > form .name{font-size: 14px;}
			body > #main > #threads > form input:checked~label{display:block;}
			body > #main > #threads > form input:checked~label img{display: none;}
			body > #main > #threads > form input:checked~iframe{display:block;}
			body > #main > #thread{position: relative; font-size: 0; word-break: break-all;}
			body > #main > #thread input[type='radio']{width: 0;height: 0;}
			body > #main > #thread input[type='radio']:checked + form .reply,
			body > #main > #thread input[type='radio']:checked + form .submit{display: inline;}
			body > #main > #thread input[type='radio']:checked + form [name='content']{font-weight: bold;}
			body > #main > #thread input[type='radio']:checked + form .info{display: block;}
			body > #main > #thread input[data-mode='modify']:checked + form [name="content"]{display: none;}
			body > #main > #thread input[data-mode='modify']:checked + form .reply:before{content:"수정 : "; font-weight:bold; color:#f00;}
			body > #main > #thread .media{position: relative; display: block; margin-bottom: 10px; cursor: pointer;}
			body > #main > #thread .media:after{content:"▹"; position: absolute; border:3px solid #000; border-radius: 50%; margin: auto; top: 0; right: 0; bottom: 0; left: 0; width:100px; height:100px; line-height: 100px; font-size: 100px; text-indent: 10px; text-align: center;}
			body > #main > #thread .media:hover:after{content:"▸";}
			body > #main > #thread .media~.media{margin-top: 20px;}
			body > #main > #thread .media img{width:100%; cursor: pointer;}
			body > #main > #thread .media iframe{position: absolute; left: 0; top:0; width:100%; height:100%; z-index: 1; cursor: initial;}
			body > #main > #thread .media .gist{position: absolute; left: 0; top: 0; width:100%; height:93%; z-index: 1; cursor: initial;}
			body > #main > #thread .media .gist *{height:100%}
			body > #main > #thread .media .gist .gist-meta{height:auto;}
			body > #main > #thread form,
			body > #main > #thread form *{display: inline;}
			body > #main > #thread .reply{position: relative; border-bottom: 1px solid #000; font-size: 15px; color:#bbb; z-index: 12;}
			body > #main > #thread .reply br{display: none;}
			body > #main > #thread .reply,
			body > #main > #thread .image,
			body > #main > #thread .info{display: none}
			body > #main > #thread .info{position: fixed; border-top:1px solid #ddd; bottom: 0; right: 0; left: 0; z-index: 100;}
			body > #main > #thread .info .oembed{}
			body > #main > #thread .info .infobox{display: block; margin: auto; padding: 0 10px; max-width: 600px; background: #efefef; z-index: 11; box-sizing: border-box;}
			body > #main > #thread .info .infobox *{display: inline-block; font-size: 14px; height:50px; line-height: 50px;}
			body > #main > #thread .info .infobox a+a{margin-left: 7px;}
			body > #main > #thread .info [name='profile']{padding-left: 35px; font-weight: bold; background-size: 30px; background-repeat: no-repeat; background-position: 0 11px;}
			body > #main > #thread .info .setting{text-decoration: underline; cursor: pointer;}
			body > #main > #thread .info .setting[name='modify']{}
			body > #main > #thread .info .setting[name='remove']{color:#f00;}
			body > #main > #thread .info .close{float: right;}
			body > #main > #thread .info .close:after{content: "×"; font-size: 24px;}
			body > #main > #thread .link{font-size:15px; color:#1a0dab;}
			body > #main > #thread [name='content']{position: relative; font-size:15px; cursor: pointer; z-index: 12;}
			body > #main > #games > .football .basketball,
			body > #main > #games > .football .baseball,
			body > #main > #games > .basketball .football,
			body > #main > #games > .basketball .baseball,
			body > #main > #games > .baseball .football,
			body > #main > #games > .baseball .basketball{display: none}
			body > #main > #games > .game{position: relative; overflow:hidden; margin-bottom: 10px; height:62px; font-size:0; box-sizing: border-box; box-shadow: 0px 0px 4px rgba(30, 30, 30, 0.2); background-repeat: no-repeat; background-position: center; background-color:#000; background-size: 100% auto;}
			body > #main > #games > .game .title{position: absolute; left: 62px; right: 0; top:0; bottom: 0; padding:11px; padding-left: 15px; box-sizing:border-box; background-color:rgba(0,0,0,0.5);}
			body > #main > #games > .game .title[href]{cursor: pointer;}
			body > #main > #games > .game .title:after{content:""; position: absolute; left:39px; top:0; right: 0; bottom:0; height: 100%;z-index: 0;}
			body > #main > #games > .game:before{content: ""; display: inline-block; border:6px solid #fff; width:50px; height:50px; background:#fff url("/img/logo.gif") no-repeat; opacity: 1; z-index: 1;}
			body > #main > #games > .game:after{content: ""; position: absolute; margin: auto; left: 61px; top: 0; bottom: 0; width: 0px; height: 0px; border-top: 6px solid transparent; border-bottom: 6px solid transparent; border-left: 6px solid white;}
			body > #main > #games > .game .title dl{overflow:hidden;}
			body > #main > #games > .game .title dl *{display:inline; font-weight: lighter; font-size:14px; color:#fff;}
			body > #main > #games > .game .title dl dd{margin:0 5px;}
			body > #main > #games > .game .country{display: none;}
			body > #main > #games > .game .country{display: none; margin-left: 5px;}
			body > #main > #games > .game.home .home *,
			body > #main > #games > .game.away .away *{font-weight: bold;}
			body > #main > #games > .game input{display: none;}
			body > #main > #games > .game label{display: block;}
			body > #main > #games > .game iframe{position: absolute;left: 0;top: 0;width: 100%;height: 100%;}
			body > #main > #games > .game.bund:before{background-position: -50px 0;}
			body > #main > #games > .game.serie_a:before{background-position: -100px 0;}
			body > #main > #games > .game.la_liga:before{background-position: -150px 0;}
			body > #main > #games > .game.ligue_1:before{background-position: -200px 0;}
			body > #main > #games > .game.liga_mx:before{background-position: -300px 0;}
			body > #main > #games > .game.spl:before{background-position: -350px 0;}
			body > #main > #games > .game.tsl:before{background-position: -400px 0;}
			body > #main > #games > .game.ppl:before{background-position: -500px 0;}
			body > #main > #games > .game.arge:before{background-position: -550px 0;}
			body > #main > #games > .game.engch:before{background-position: -600px 0;}
			body > #main > #games > .game.afc:before{background-position: -650px 0;}
			body > #main > #games > .game.copa_rey:before{background-position: -650px 0;}
			body > #main > #games > .game.cwc:before{background-position: -750px 0;}
			body > #main > #games > .game.europa:before{background-position: -800px 0;}
			body > #main > #games > .game.bsa:before{background-position: -900px 0;}
			body > #main > #games > .game.holl:before{background-position: -950px 0;}
			body > #main > #games > .game.nba:before{background-position: 0 -1000px;}
 /* lang */ [lang='ko'] #thread form .reply:empty:before{content: "내용을 입력해주세요"; position: relative; z-index: -1;}
			footer, header > form[name='form'], aside, main {display: block; margin: auto; padding: 0 10px; width: 100%; max-width: 600px; line-height:1; font-size:0; box-sizing: border-box;}
			#thread, #threads, #aside, body[class*="thread"] #news, body[class*="thread"] #games{display: none;}
			.thread #thread, .threads #threads, .threads #aside, body[class="news"] #news, body[class="games"] #game{display: block;}
			@media (max-width: 420px) {.gist .gist-meta a{font-size:12px}}
		</style>
		<title>forum.red</title>
	</head>
	<body>
		<header id="header">
			<input type="radio" name="switch" id="switch" data-mode="post" data-request="" data-url="" data-img="">
			<form name="form" action="javascript:forum.fn.util()">
				<fieldset>
					<div id="util">
						<input type="radio" onkeydown="window.forum.fn.keywordFocus(event)" name="keyword">
						<label id="tag" onkeyup="window.forum.fn.keywordFocus(event)" onclick="" contenteditable></label>
						<label for="switch"></label>
						<strong><h1 id="headline"><a href="/">forum</a></h1><i class="placeholder"></i></strong>
						<input name="content" type="text" maxlength="150" onkeyup="window.forum.fn.oembed(this)" placeholder="" shortcut="off" list="keep" required><datalist id="keep"></datalist>
						<select name="nav" id="nav" onchange="window.forum.fn.nav(this.value)">
							<option value="default">&mldr;</option>
							<option class="signin" value="Google">Google</option>
							<option class="signin" value="Facebook">Facebook</option>
							<option class="signin" value="Twitter">Twitter</option>
							<option class="signin" value="Github">Github</option>
							<option class="signout" value="">signout</option>
						</select>
					</div>
					<div id="shortcut" onfocusout=""></div>
					<div onclick="window.forum.callback.autocomplete(0)" class="dim"></div>
				</fieldset>
			</form>
		</header>
		<aside id="aside">
			<input type="checkbox" id="more_images">
			<div id="keywords"></div>
			<div id="infobox"></div>
		</aside>
		<main id="main">
			<div id="news"></div>
			<div id="games"></div>
			<div id="threads"></div>
			<div id="thread" class="post"></div>
		</main>
		<footer></footer>
		<div id="jsonp"></div>
		<script>
		(function(bom, dom) {
			// 
			// global forum
			//    var
			//        api, element
			//    function
			//        fn, init, route, oembed, template, rest, callback
			// 
			// 
			bom.forum = {
				api : {
					lang : "",
					popstate : typeof bom.onpopstate != "undefined",
					restUrl : "https://fora.firebaseio.com/",
					autocomplete : function(keyword) {
						return "http://" + forum.api.lang + ".wikipedia.org/w/api.php?action=opensearch&limit=10&format=json&utf8=1&callback=forum.callback.autocomplete&search=" + keyword;
					},
					game : function(type, date) {
						return "https://spreadsheets.google.com/feeds/list/1-JVlP9YIwC2DydGZvAtOSmRE-BhN32IRK8g6AfchcQU/" + type + "/public/basic?alt=json-in-script&sq=date=" + date + "&callback=forum.callback.game";
					},
					news : function() {
						return "https://" + forum.api.lang + ".wikinews.org/w/api.php?action=query&format=json&list=recentchanges&redirects=1&utf8=1&rcdir=newer&rcnamespace=0&rclimit=100&callback=forum.callback.news";;
					},
					infobox : function(tag) {
						return "http://" + forum.api.lang + ".dbpedia.org/sparql?default-graph-uri=http://" + forum.api.lang + ".dbpedia.org&query=select distinct * where { <http://" + forum.api.lang + ".dbpedia.org/resource/" + tag.replace(/%20/gi, "_") + "> ?k ?o . }&format=application%2Fsparql-results%2Bjson&timeout=0&debug=on&callback=forum.callback.infobox";
					},
					thread : function(tag, id) {
						return forum.api.restUrl + tag + "/" + id + ".json?callback=forum.callback.thread";
					},
					threads : function(tag, date, user) {
						var parameter = "";
						if(typeof user != "undefined")
							parameter = "orderBy=\"email\"&equalTo=\"" + user + "\"&limitToLast=50";
						else
							parameter = (date ? "endAt=" + date + "&" : "") + "orderBy=\"date\"&limitToLast=10";
						return forum.api.restUrl + tag + ".json?" + parameter + "&callback=forum.callback.threads";
					},
					root : function(tag, root) { 
						return forum.api.restUrl + tag + "/" + root + ".json/?callback=forum.callback.thread";
					},
					branch : function(tag, root, date) {
						return forum.api.restUrl + tag + ".json?equalTo=\"" + root + "\"&orderBy=\"root\"&callback=forum.callback.thread";
					},
					regex : {
						url : /[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi,
                        email : /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i
					}
				},
				element : {
					jsonp : dom.getElementById("jsonp"),
					shortcut : dom.getElementById("shortcut"),
					switch : dom.getElementById("switch"),
					form : dom.form,
					nav : dom.getElementById("nav"),
					tag : dom.getElementById("tag"),
					news : dom.getElementById("news"),
					games : dom.getElementById("games"),
					threads : dom.getElementById("threads"),
					thread : dom.getElementById("thread"),
					keyword : "",
					images : dom.getElementById("images"),
					main : dom.getElementById("main"),
					aside : dom.getElementById("aside"),
					keywords : dom.getElementById("keywords"),
					infobox : dom.getElementById("infobox")
				},
				init : {
					sesstion : function() {
						var script = dom.createElement("script");
						script.src = "//www.gstatic.com/firebasejs/live/3.0/firebase.js";
						script.onload = function() {
							var config = {
								apiKey: "AIzaSyBi0JE_HRNznjb_43Bcv5xoBHuZEaCT07M",
								authDomain: "fora.firebaseapp.com"
							};
							firebase.initializeApp(config);
							firebase.auth().onAuthStateChanged(function(user) {
								if (user) {
									var key = bom.localStorage.key(0);
									bom.localStorage.api = user.Xc;
									bom.localStorage.name = user.displayName;
									bom.localStorage.email = user.email;
									bom.localStorage.profile = user.photoURL;
									forum.api.auth = user.Xc;
									el = dom.querySelectorAll(".signin");
									for(var i = 0, len = el.length; i < len; i++){
										el[i].remove();
									}
								}else{
									dom.querySelectorAll(".signout").remove();
								}
							});
						};
						forum.element.jsonp.appendChild(script);
					},
					scroll : function(bool) {
						bool ? dom.body.setAttribute("onscroll", "window.forum.fn.scroll(event)") : dom.body.removeAttribute("onscroll");
					},
					route : function() {
						var parameters = bom.location.pathname,
							parameters = parameters ? forum.fn.location(parameters) : "";

						if(parameters.id){
							forum.route.thread(parameters);
							return;
						}else if(parameters.tag){
							forum.route.threads(parameters);
							return;
						}else{
							forum.route.home(parameters);
						}
					},
					home : function() {
						dom.body.removeAttribute("class");
						dom.title = "forum.red";
						forum.element.thread.innerHTML = "";
						forum.element.threads.innerHTML = "";
						forum.element.tag.textContent = "";
					},
					thread : function(tag) {
						var v = tag.replace("_", " ");
						v = decodeURIComponent(v);
						dom.title = v;
						forum.element.tag.textContent = v;
						dom.body.className = "thread";
						forum.element.thread.innerHTML = "";
						forum.init.scroll(0);
					},
					threads : function(tag) {
						forum.element.shortcut.innerHTML = "";
						forum.element.thread.innerHTML = "";
						forum.element.keyword = tag;
						dom.title = tag;
						forum.element.tag.textContent = tag;
						dom.body.className = "threads";
					},
					lang : function(json) {forum.lang = json}
				},
				route : {
					home : function(parameters) {
						!forum.element.news.innerHTML.length ? forum.init.scroll(0) : "";
						forum.init.home();
						if(typeof document.body.onscroll == "function"){
							if(typeof parameters.date != "undefined")
								!dom.querySelector(".game [value=\"" + parameters.date + "\"]") ? forum.fn.games(parameters) : "";
						}else{
							forum.init.scroll(1);
							forum.fn.jsonp(forum.api.news());
							forum.fn.games(parameters);
						}
					},
					thread : function(parameters) {
						forum.init.thread(parameters.tag);
						forum.fn.jsonp(forum.api.thread(parameters.tag, parameters.id));
					},
					threads : function(parameters) {
						var tag = parameters.tag.replace("_", " "),
							tag = decodeURIComponent(tag),
							parametersUser = typeof parameters.user != "undefined",
							parametersDate = typeof parameters.date == "undefined",
							el = forum.element.threads,
							threadsLen = el.innerHTML.length,
							getDate = function() {
								var date = dom.getElementsByName("date");
									date = date.length ? date[date.length-1].value*1 : forum.fn.jsonp(forum.api.threads(tag, parameters.date));
									if(date == ((parameters.date*1)+1))
										forum.fn.jsonp(forum.api.threads(tag, parameters.date));
									else if(!dom.getElementById("thread_none"))
										forum.init.scroll(1);
							};
						if(dom.title != tag || forum.element.infobox.innerHTML.length == 0 || (dom.body.className.indexOf("user") > 0 && !parametersUser)){
							forum.fn.jsonp(forum.api.infobox(tag));
							el.innerHTML = "";
						}
						forum.init.threads(tag);
						!threadsLen || parametersUser ? forum.init.scroll(0) : "";

						if(typeof document.body.onscroll == "function")
							getDate();
						else
							if(parametersUser){
								dom.body.className += " user";
								forum.fn.jsonp(forum.api.threads(tag, null, parameters.user));
								return;
							}else if(parametersDate){
								el.innerHTML.length == 0 ? forum.fn.jsonp(forum.api.threads(tag)) : getDate();
								return;
							}else{
								getDate();
							}
					}
				},
				fn : {
					location : function(parameters) {
                        var path = {},
                            p = parameters.substr(1).split("/");
                            

                        for(var i = 0, len = p.length; i < len; i++){
                            try {
                                if((p[i].length == 8 || p[i].length == 13) && typeof eval(p[i]) === "number"){
                                    path.date = p[i]*1;
                                }else{
                                    if(i == 0){
                                        path.tag = p[i];
                                    }else{
                                        if(p[i].length == 8 && typeof eval(p[i]) === "number")
                                            path.date = p[1]*1;
                                        else if(p[i].match(forum.api.regex.email))
                                            path.email = p[i];
                                        else
                                            path.id = p[i];
                                    }
                                }
                            } catch (error) {
                                console.log(error);
                            }
                        }
						return path;
					},
					prettyDate : function(date) {
						var d = [];
							d.push(date.substr(0, 4));
							d.push(date.substr(4, 2));
							d.push(date.substr(6, 6));
							d = d.toString();
							d = new Date(d).getTime();
							d = new Date(d).toISOString().substr(0,10).replace(/-/gi,"");
						return d;
					},
					games : function(parameters) {
						var date = typeof parameters.date != "undefined" ? parameters.date : new Date(new Date().getTime() - 86400000).toISOString().substr(0,10).replace(/-/gi,"");		
						forum.fn.jsonp(forum.api.game(1, date));
						forum.fn.jsonp(forum.api.game(2, date));
						forum.fn.jsonp(forum.api.game(3, date));
					},
					path : function(path, event) {
						typeof event != "undefined" ? event.preventDefault() : "";
						typeof path != "string" ? path = path.href : "";
						if(forum.api.popstate){
							history.pushState('', 'PushState - 1', path);
							forum.init.route();
						}else{
							bom.location.href = path;
						}
					},
					notFound : function(el, index) {
						var elm = dom.getElementById(el.name+"_"+index);
							elm.parentNode.removeChild(elm);
						if(el.name == "infobox_image")
							dom.getElementsByName(el.name)[0].checked = true;
					},
					clear : function(){
						forum.element.jsonp.innerHTML = "";
					},
					jsonp : function(url, callback) {
						var script = dom.createElement("script");
						script.src = url;
						script.onload = "forum.fn.clear()";
						forum.element.jsonp.appendChild(script);
					},
					ajax : function(url, method, data, type) {
						var xhr = bom.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
						xhr.onreadystatechange = function(e) {
							if (e.target.readyState == 4 && e.target.status == 200){
								var json = eval("("+e.target.responseText+")");
								if(typeof type == "function"){
									type(json);
								}else{
									forum.callback[type](json);
								}
								return;
							}else{
								console.log(e);
							}
						};
						xhr.open(method, url, true);
						data ? xhr.send(data) : xhr.send();
					},
					oembed : function(el) {
						var url = typeof el.value != "undefined" ? el.value.match(forum.api.regex.url) : el.textContent.match(forum.api.regex.url);
						if(url){
							for(var i = 0, len = url.length; i < len; i++){
								var uri = url[i];
								uri.indexOf("http") > 0 ? "" : uri = "https://" + uri;
								forum.element.jsonp.innerHTML = "<a id=\"a\" href=\"" + uri + "\"></a>";
								var a = dom.getElementById("a");
								var radio = dom.querySelector("[name='switch']:checked");
								if(radio.dataset.request.indexOf(a.href) < 0){
									radio.dataset.request += a.href + ",";
									if (a.hostname == "youtu.be") {
										var id = a.pathname.replace("/", "");
										radio.dataset.url += "https://www.youtube.com/embed/" + id + ",";
										radio.dataset.img += "https://i.ytimg.com/vi/" + id + "/hqdefault.jpg,";
									}else if(a.hostname == "www.youtube.com" || a.hostname == "m.youtube.com"){
										var id = a.search.replace("?v=", "");
										radio.dataset.url += "https://www.youtube.com/embed/" + id + ",";
										radio.dataset.img += "https://i.ytimg.com/vi/" + id + "/hqdefault.jpg,";
									}else if(a.hostname == "vimeo.com"){
										forum.fn.ajax("https://vimeo.com/api/oembed.json?url=https://" + url, "GET", "", forum.callback.oembed);
									}else if(a.hostname == "soundcloud.com"){
										forum.fn.ajax("https://soundcloud.com/oembed?url=" + uri + "&format=json", "GET", "", forum.callback.oembed);
									}else if(a.hostname == "www.slideshare.net"){
										forum.fn.jsonp("https://www.slideshare.net/api/oembed/2?url=" + url + "&format=json&callback=forum.callback.oembed");
									}else if(a.hostname == "gist.github.com"){
										radio.dataset.url += url+",";
										radio.dataset.img += "https://gist.github.com/fluidicon.png,";
									}else if(a.hostname == "jsfiddle.net"){
										radio.dataset.url += url+",";
										radio.dataset.img += "http://doc.jsfiddle.net/_images/homepage-sm.png,";
									}else{
										radio.dataset.url += url + ",";
									}
								}
								a.remove();
							}
						}else{
							var radio = dom.querySelector("[name='switch']:checked");
							radio.dataset.url = "";
							radio.dataset.img = "";
							radio.dataset.request = "";
						}
					},
					keywordFocus : function(e) {
						var area = !(dom.getElementById("shortcut").textContent.length > 0),
							keywords = dom.getElementsByName('keyword'),
							keyword = forum.element.tag.textContent,
							len = keywords.length,
							autocomplete = function() {
								len > 0 || area ? forum.fn.jsonp(forum.api.autocomplete(keyword)) : "";
							},
							submit = function() {
								var checked = dom.querySelector("input[name=\"keyword\"]:checked"),
									check = checked ? checked.value : 0,
									v = forum.element.tag.textContent;
								if(v.length > 0 || checked){
									if(v != dom.title)
										check ? forum.fn.util(check) : forum.fn.util(v);
								}else{
									alert(forum.lang.validation.keyword);
									forum.element.tag.innerHTML = "";
									forum.element.switch.checked = false;
								}
							}
						switch(e.which){
							case 0 :
								submit();
								break;
							case 8 :
								autocomplete();
								break;
							case 9 :
								element.tag.removeAttribute("contenteditable");
								element.tag.setAttribute("contenteditable","true");
								break;
							case 13 :
								submit();
								break;
							case 27 :
								element.shortcut.innerHTML = "";
								break;
							case 38 :
								if(area){
									autocomplete();
								}else{
									var checked = keywords[len-1];
										checked.checked = true;
										checked.focus();
								}
								break;
							case 40 :
								area ? autocomplete() : "";
                                if(len > 1){
									var checked = keywords[1];
										checked.checked = true;
										checked.focus();
								}
								break;
							default :
								autocomplete();
								break;
						}
					},
					scroll : function(v) {
						if(v.type == "scroll"){
							var limit = dom.body.scrollHeight - dom.documentElement.clientHeight,
								top = dom.body.scrollTop;
							if(top >= limit){
								var path, parameters = bom.location.pathname,
									parameters = parameters ? forum.fn.location(parameters) : "",
									date = dom.getElementsByName("date");
									typeof parameters.date ? delete parameters.date : "";

									if(typeof parameters.tag != "undefined"){
                                        path = "/" + parameters.tag + "/" + (date[date.length - 1].value - 1);
									}else{
										path = forum.fn.prettyDate(date[date.length - 1].value);
                                    }
								date ? forum.fn.path(path) : "";
								forum.init.scroll(0);
								forum.fn.loading(1);
							}
						}
					},
					util : function(keyword) {
						var checked = forum.element.switch.checked;

						if(keyword != undefined){
							keyword = keyword.replace(/ /gi, "_");
							forum.fn.path("/" + keyword);
							return;
						}else if(!checked){
							keyword = keyword.replace(/ /gi, "_");
							forum.fn.path("/" + keyword);
							return;
						}else if(checked){
							forum.fn.post(forum.element);
						}
					},
					close : function() {
						dom.querySelector("[name='switch']:checked").checked = false;
					},
					modify : function(id){
						var el = dom.getElementById("switch"+id),
							reply = dom.getElementById("reply"+id),
							content = dom.querySelector("[for=\"switch"+id+"\"]").textContent;
						if(el.dataset.mode != "post"){
							el.dataset.mode = "post";
							reply.innerHTML = "";
						}else{
							el.dataset.mode = "modify";
							reply.innerHTML = content;
							reply.focus();
						}
					},
					reply : function(event, el, id) {
						if(event.which == 13){
							var content = el.textContent,
								path = typeof forum.element.tag.textContent != "undefined" ? forum.element.tag.textContent : "",
								el = dom.querySelector("[name='switch']:checked");
							forum.rest.post(content, path, id);	

							setTimeout(function(){ el.innerHTML = "" }, 0);
						}
					},
					post : function(el) {
						var content = el.form.content.value;
						var path = typeof el.tag.textContent != "undefined" ? el.tag.textContent : "";
						forum.rest.post(content, path);
					},
					nav : function(type) {
						if(type){
							type == "Google" ? forum.fn.jsonp("https://apis.google.com/js/platform.js") : "";
							var provider = new firebase.auth[type+"AuthProvider"]();
							firebase.auth().signInWithRedirect(provider).then(function(result) {
								var	token = result.credential.accessToken,
									user = result.user;
							}).catch(function(error) {
								var errorCode = error.code,
									errorMessage = error.message,
									email = error.email,
									credential = error.credential;
							});
						}else{
							localStorage.clear();
							bom.location.href = "/";
						}
					},
					dateFormat : function(time) {
						var today = new Date().toISOString().substr(0,10).replace(/-/gi,""),
							diff = (((new Date()).getTime() - time) / 1000);
						diff = diff - 33000;
						if(diff < 0) diff = 0;
						var day_diff = Math.floor(diff / 86400);
						if ( isNaN(day_diff) || day_diff < 0 ) return;
						return day_diff == 0 && (
							diff < 60 && "now" ||
							diff < 120 && "1 minute" ||
							diff < 3600 && Math.floor( diff / 60 ) + "minute" ||
							diff < 7200 && "1 hour" ||
							diff < 86400 && Math.floor( diff / 3600 ) + "hour") ||
							day_diff == 1 && "1days" ||
							day_diff < 7 && day_diff + "days" ||
							day_diff < 31 && Math.floor( day_diff / 7 ) + "weeks" ||
							today
					},
					rid : function() {
						return Math.random().toString(36).substring(20);
					},
					loading : function(v, type) {
						var dom_body = dom.body;
						v ? dom_body.className += " loading" : dom_body.className = dom_body.className.replace(" loading", "");
					}
				},
				rest : {
					post : function(content, path, id) {
						if(!forum.api.auth){
							alert(forum.lang.validation.login);
						}else if(!content.length){
							alert(forum.lang.validation.content);
						}else{
							var root = dom.getElementsByName("thread"),
								el = dom.querySelector("[name='switch']:checked"),
								data = {
									content : content,
									date : new Date().getTime(),
									profile : bom.localStorage.profile,
									email : bom.localStorage.email,
									name : bom.localStorage.name,
									lang : forum.api.lang,
									url : [],
									img : []
								},
								type = "";

							if(el.dataset.mode == "post"){
								type = "POST";
								data.parent = id;
								root.length > 0 ? data.root = root[0].id : "";
							}else{
								var target = dom.getElementById(id);
								parent = typeof target.parent != "undefined" ? data.parent = target.parent.value : 0;
								root = typeof target.root != "undefined" ? data.root = target.root.value : 0;

								type = "PUT";
								path = path+"/"+el.id.replace("switch", "");
							}
							path = forum.api.restUrl + path + ".json?auth=" + forum.api.auth;
							var url = el.dataset.url.slice(0,-1).split(","),
								img = el.dataset.img.slice(0,-1).split(","),
								request = el.dataset.request.slice(0,-1).split(",");
							for(var i = 0, len = request.length; i < len; i++){
								data.content = data.content.replace(request[i], "");
							}
							url[0] != "" ? data.url = url : "";
							img[0] != "" ? data.img = img : "";
							data = JSON.stringify(data);
							forum.callback.firebase.data = data;
							forum.fn.ajax(path, type, data, "firebase");
						}
					},
					delete : function(tag, id) {
						var bool = confirm(forum.lang.validation.delete);
						forum.callback.delete.id = id;
						bool ? forum.fn.ajax(forum.api.restUrl + tag + "/" + id + ".json?auth=" + forum.api.auth, "DELETE", "", "delete") : "";
					}
				},
				oembed : {
					youtube : function(id) {
						dom.getElementById("media"+id).innerHTML += "<iframe src=\"https://www.youtube.com/embed/" + id + "?autoplay=1\" frameborder=\"0\"></iframe>";
					},
					default : function(id, url) {
						var el = dom.getElementById("media"+id);
						if(url.indexOf("gist.github.com") >= 0){
							forum.callback.gist.id = id;
							forum.fn.jsonp("https://" + url + ".json?callback=forum.callback.gist");
						}else if(url.indexOf("jsfiddle.net") >= 0){
							el.innerHTML += "<script src=\"https://" + url + "embed/\"></scr"+"ipt>";
							forum.fn.jsonp("https://" + url + "embed/");
						}else{
							var url = url.indexOf("youtube") >= 0 || url.indexOf("vimeo") >= 0  ? url + "?autoplay=1" : url;
							el.innerHTML += "<iframe src=\"" + url + "\"></iframe>";
						}
					}
				},
				template : {
					autocomplete : function(keyword, json, num) {
						var v = json[1][num].replace(keyword, "<span>" + keyword + "</span>");
						return "<input onkeydown=\"forum.fn.keywordFocus(event)\" id=\"keyword" + num + "\" type=\"radio\" name=\"keyword\" value=\"" + json[1][num].replace(/%20/gi, "_") + "\"><label for=\"keyword" + num + "\"><a href=\"/" + json[1][num] + "\" onclick=\"forum.fn.path(this)\">" + v + "</a></label>";
					},
					youtube : function(id) {
						return "<a class=\"media\" id=\"media" + id + "\" onclick=\"window.forum.oembed.youtube('" + id + "')\"><img src=\"https://i.ytimg.com/vi/" + id + "/hqdefault.jpg\" alt=\"youtube\"></a>";
					},
					oembed : function(url, img, key) {
						var id = forum.fn.rid();
						return "<a class=\"media " + key + "\" id=\"media" + id + "\"><img src=\"" + img + "\" alt=\"\" onclick=\"window.forum.oembed.default('" + id + "', '" + url + "')\"></a>";
					},
					news : function(pageid, title) {
						return "<li name=\"news\"><a href=\"https://" + forum.api.lang + ".wikinews.org/wiki/" + title + "?dpl_id=" + pageid + "\" target=\"_blank\" title=\"new window\">" + title + "</a></li>";
					},
					game : function(category, game, league, home, home_score, home_country, away, away_score, away_country, date, youtube, win, img) {
						var type = 0,
							attr = typeof youtube != "undefined" ? "href=\"https://www.youtube.com/watch?v=" + youtube + "\" target=\"_blank\" title=\"new window\"" : "";
						if(category == 1)
							type = "football";
						else if(category == 2)
							type = "basketball";
						else if(category == 3)
							type = "baseball";

						return "<div name=\"game\" class=\"game " + win + " " + league + " " + type + "\" " + img + "><a " + attr + " class=\"title\"><dl class=\"home\"><dt><strong class=\"name\">" + home + "</strong><span class=\"country\">" + home_country + "</span></dt><dd class=\"score\">" + home_score + "</dd></dl><dl class=\"away\"><dt><strong class=\"name\">" + away + "</strong><span class=\"country\">" + away_country + "</span></dt><dd class=\"score\">" + away_score + "</dd></dl></a><input type=\"hidden\" name=\"date\" value=\"" + date + "\"></div>";
                    },
					infobox_image : function(key, value, num, checked) {
						return "<label id=\"infobox_image_" + num + "\" for=\"infobox_img" + num + "\"><input id=\"infobox_image" + num + "\" type=\"radio\" name=\"infobox_image\" " + checked + "><img name=\"infobox_image\" onerror=\"forum.fn.notFound(this, " + num + ")\" src=\"http://commons.wikimedia.org/wiki/Special:Filepath/" + value + "\" alt=\"" + key + "\"></label>";
					},
					thread : function(prop, data, img) {
						img = typeof img != "undefined" ? "<div class=\"image\">" + img + "</div>" : "";
						var tag = forum.element.tag.textContent,
                            meta = "",
						parent = typeof data.parent != "undefined" ? "<input name=\"parent\" type=\"hidden\" value=\"" + data.parent + "\">" : "",
						root = typeof data.root != "undefined" ? "<input name=\"root\" type=\"hidden\" value=\"" + data.root + "\">" : "",
						setting = data.email == localStorage.email ? "<a class=\"setting\" onclick=\"forum.fn.modify('" + prop + "')\" name=\"modify\">modify</a><a class=\"setting\" onclick=\"forum.rest.delete('" + tag + "', '" + prop + "')\" name=\"remove\">remove</a>" : "";
						if(typeof data.url != "undefined"){
							var len = data.url.length;
							if(len > 0){
								for(var i = 0; len > i; i++){
									var tpl = data.img[i] ? forum.template.oembed(data.url[i], data.img[i], prop) : "<a class=\"link\" href=\"http://" + data.url[i] + "\" target=\"_blank\" title=\"new window\">#link" + (i + 1) + "</a>";
									typeof tpl != "undefined" ? meta += tpl : "";
								}
							}
						}
						return meta + "<input id=\"switch" + prop + "\" name=\"switch\" type=\"radio\" data-mode=\"post\" data-request=\"\" data-url=\"\" data-img=\"\"><form action=\"javascript:forum.fn.reply('" + prop + "')\" id=\"" + prop + "\" name=\"thread\"><input type=\"hidden\" name=\"lang\" value=\"" + data.lang + "\"><div class=\"info\"><div class=\"infobox\"><a href=\"/"+tag+"/" + data.email + "\" name=\"profile\" style=\"background-image:url(" + data.profile + ")\">" + data.name + "</a><a name=\"date\">" + forum.fn.dateFormat(data.date) + "</a>" + setting + "<a class=\"close\" onclick=\"window.forum.fn.close()\"><i class=\"alt\">close</i></a></div></div><label for=\"switch" + prop + "\" name=\"content\">" + data.content + "</label><div id=\"reply"+prop+"\" title=\""+forum.lang.title.reply+"\" class=\"reply\" contenteditable onkeyup=\"window.forum.fn.oembed(this)\" onkeydown=\"forum.fn.reply(event, this, '" + prop + "')\"></div>" + parent + root + img + "</form>";
					},
					threads : function(json, key, tag, img) {
						var thread_key = typeof json[key].root != "undefined" ? json[key].root + "#" + key : key;
						return "<form name=\"threads\" " + (typeof json[key].root == "undefined" ? "class=\"root\"" : "") + " action=\"javascript:fetchRecord(this)\"><input name=\"root\" type=\"hidden\" value=\"" + json[key].root + "\"><input name=\"parent\" type=\"hidden\" value=\"" + json[key].parent + "\"><input name=\"date\" type=\"hidden\" value=\"" + json[key].date + "\">" + img + "<div id=\"content" + key + "\" class=\"content\"><div class=\"info\"><a class=\"profile\" href=\"/" + tag + "/" + json[key].email + "\" onclick=\"forum.fn.path(this)\"><img class=\"profile_img\" alt=\"" + json[key].name + "\" src=\"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg\"><span class=\"name\">" + json[key].name + "</span></a><span class=\"date\">" + forum.fn.dateFormat(json[key].date) + "</span></div><a class=\"txt\" href=\"/" + tag + "/" + thread_key + "\" onclick=\"forum.fn.path(this, event)\" contenteditable=\"false\">" + json[key].content + "</a></div></form>";
					},
					thread_media : function(json, key, num) {
						return "<a class=\"thumnail\" id=\"media" + key + "\"><img src=\"" + json[key].img[num] + "\" alt=\"thumnail\"></a>";
					}
				},
				callback : {
					game : function(json) {
						var body = "",
							entry = json.feed.entry,
							category = json.feed.title.$t;

						if(typeof entry != "undefined"){
							var games = dom.getElementById("games");
							for (var i = 0;  i <= entry.length; i++) {
								if(typeof entry[i] != "undefined"){
									var game = entry[i].content.$t,
									game = game.split(","),
									league = eval("{"+entry[i].title.$t+"}"),
									home = eval("{"+game[0]+"}"),
									home_score = eval("{"+game[1]+"}"),
									home_country = eval("{"+game[2]+"}"),
									away = eval("{"+game[3]+"}"),
									away_score = eval("{"+game[4]+"}"),
									away_country = eval("{"+game[5]+"}"),
									date = eval("{"+game[6]+"}"),
									youtube = eval("{"+game[7]+"}"),
									win = away_score < home_score ? "home" : "away",
									img = typeof youtube != "undefined" ? "style=\"background-image:url(https://i.ytimg.com/vi/" + youtube + "/hqdefault.jpg)\"" : "";

									body += forum.template.game(category, game, league, home, home_score, home_country, away, away_score, away_country, date, youtube, win, img);
								}
							}
							games.innerHTML += body;
							forum.init.scroll(1);
							forum.fn.loading(0);
						}
					},
					news : function(json) {
						var body = "";
						if(json.query.recentchanges.length){
							var list = json.query.recentchanges;
							for(var i = 0; i < 5; i++){
								var pageid = list[i].pageid,
									title = list[i].title;
								if(body.indexOf(title) < 0){
									body += forum.template.news(pageid, title);
								}
							}
							forum.element.news.innerHTML = "<ul class=\"news\">" + body + "</ul>";
						}
					},
					infobox : function(json) {
						var dl ="",
							keywords = "",
							uri = "",
							images = "",
							infobox_image = "",
							json = json["results"]["bindings"],
							property = "dbpedia.org/property/";

						for(var i in json){
							var key = json[i].k.value.replace("http://ko.dbpedia.org/property/",""),
							value = json[i].o.value.replace("http://ko.dbpedia.org/resource/","");
							value = value.replace(/_/gi, " ");
							if(json[i].k.value.indexOf("http://dbpedia.org/ontology/wikiPageWikiLink") >= 0)
								if(value.indexOf(".svg") >= 0 || value.indexOf(".jpg") >= 0 || value.indexOf(".JPG") >= 0 || value.indexOf(".png") >= 0 || value.indexOf(".PNG") >= 0 || value.indexOf(".SVG") >= 0)
									images += forum.template.infobox_image(key, value.replace("파일:",""), i);
								else if(json[i].k.value.indexOf("wikiPageWikiLink") >= 0)
									keywords += "<a href=\"/" + value + "\">" + value + "</a>";
							if(key == "url" || ((key == "주소" || key == "웹사이트") && json[i].o['type'] == "uri"))
								uri = value;
							if(json[i].k.value.indexOf(property) >= 0 && json[i].o['xml:lang'])
								if(dl.indexOf("<dt>" + key + "</dt>") >= 0)
									dl += "<dt style=\"opacity:0\">" + key + "</dt><dd>" + value + "</dd>";
								else if(value == forum.element.tag.textContent)
									dl += "<dt>" + key + "</dt><dd><a target=\"_blank\" id=\"domain_uri\">" + value + "</a></dd>";
								else if(value.indexOf(".svg") >= 0 || value.indexOf(".jpg") >= 0 || value.indexOf(".JPG") >= 0 || value.indexOf(".png") >= 0 || value.indexOf(".PNG") >= 0 || value.indexOf(".SVG") >= 0)
									infobox_image != "" ? infobox_image += forum.template.infobox_image(key, value, i) : infobox_image += forum.template.infobox_image(key, value, i, "checked");
								else
									dl += "<dt>" + key + "</dt><dd>" + value + "</dd>";
						}
						keywords.length > 0 ? forum.element.keywords.innerHTML = "<div>" + keywords + "</div>" : element.keywords.innerHTML = "";
						dl.length > 0 ? forum.element.infobox.innerHTML = "<label for='more_images'><span>more</span></label><h2>" + infobox_image + images + "</h2><dl>" + dl + "</dl>" : forum.element.infobox.innerHTML = "";
						uri.length > 0 ? dom.getElementById("domain_uri").href = uri : "";
					},
					autocomplete : function(json) {
						var body = "";
						var keyword = forum.element.tag.textContent;
						if(json.length){
							for(var i = 0, len = json[1].length; i < len; i++){
								body += forum.template.autocomplete(keyword, json, i);
							}
							forum.element.shortcut.innerHTML = "<div class=\"autocomplete\">" + body + "</div>";
						}else{
							forum.element.shortcut.innerHTML = "";
						}
					},
					firebase : function(json) {
						if(typeof json != "undefined"){
							var tpl = "",
								img = "",
								key = json.name,
								tag = forum.element.tag.textContent,
								data = eval("({\""+key+"\" : "+forum.callback.firebase.data+"})");
							if(typeof data.img != "undefined")
								for(var g = 0, len2 = data.img.length-1; g <= len2; g++){
									img += forum.template.thread_media(json, key, g);
								}
							if(dom.body.className == "thread"){
								var forms = forum.element.thread.innerHTML,
									radio = dom.querySelector("[name='switch']:checked"),
									id = radio.id.replace("switch", ""),
									el = dom.getElementById(id);
								radio.checked = false;
								tpl = forum.template.thread(key, data[key], img);
								el ? el.outerHTML += tpl : forum.element.thread.innerHTML = tpl;
							}else{
								var el = dom.getElementsByName("threads")[0];
								tpl = forum.template.threads(data, key, tag, img);
								el ? el.outerHTML = tpl+el.outerHTML : forum.element.threads.innerHTML = tpl;
							}
							forum.element.form.content.value = "";
							delete forum.callback.firebase.data;
						}
					},
					delete : function(json) {
						if(json === null){
							var keyword = forum.element.tag.textContent,
								id = forum.callback.delete.id,
								form = dom.getElementById(id),
								_switch = dom.getElementById("switch" + id),
								media = dom.querySelectorAll("." + id),
								contents = dom.getElementById("content" + id);
								form ? form.remove() : "";
								contents ? contents.remove() : "";
								_switch ? _switch.remove() : "";

								if(media.length){
									for(var i = 0, len = media.length; i < len; i++){
										media[i].remove();
									}
								}
								var len = forum.element.thread.innerHTML.trim();
								len.length == 0 ? forum.fn.util(keyword) : "";
							alert(forum.lang.complete.delete);
							delete forum.callback.delete.id;
						}
					},
					threads : function(json) {
						if(json){
							var body = "",
								parameters = bom.location.pathname,
								parameters = parameters ? forum.fn.location(parameters) : "",
								tag = parameters.tag;
							var keys = Object.keys(json).sort().reverse();

							for(var i = 0, len1 = keys.length; i < len1; i++){
								var key = keys[i],
									img = "",
									content = "";
								if(typeof json[key].img != "undefined")
									for(var g = 0, len2 = json[key].img.length-1; g <= len2; g++){
										img += forum.template.thread_media(json, key, g);
									}
								body += forum.template.threads(json, key, tag, img);
							}

							if(typeof parameters.user == "undefined"){
								forum.element.threads.innerHTML += body;
								forum.init.scroll(1);
							}else{
								forum.element.threads.innerHTML = body;
							}
							forum.fn.loading(0);
						}else{
							forum.init.scroll(0);
							forum.fn.loading(0);
							!dom.getElementById("thread_none") ? forum.element.threads.innerHTML += "<div id=\"thread_none\">" + forum.lang.status.none + "</div>" : "";
						}
					},
					thread : function(json) {
						var date, parameters = bom.location.pathname,
                            parameters = forum.fn.location(parameters),
							id = parameters.id,
							tag = parameters.tag;
						if(typeof json.name != "undefined"){
							var key = "";
							if(typeof json.root == "undefined"){
								var map = json;
								json = {};
								json[id] = map;
								key = id;
							}else{
								key = json.root;
								forum.fn.jsonp(forum.api.root(key));
							}
							forum.fn.jsonp(forum.api.branch(tag, key, date));
						}

						var keys = Object.keys(json).sort();
						for(var i = 0, len1 = keys.length; i < len1; i++){
							var key = keys[i],
								img = "",
								content = "";
							if(typeof json[key].img != "undefined")
								for(var g = 0, len2 = json[key].img.length-1; g <= len2; g++){
									img += forum.template.thread_media(json, key, g);
								}
							if(typeof json[key].parent != "undefined")
								dom.getElementById(json[key].parent).outerHTML += forum.template.thread(key, json[key], img);
							else
								forum.element.thread.innerHTML += forum.template.thread(key, json[key], img);							
						}
					},
					oembed : function(json) {
						forum.element.jsonp.innerHTML += json.html;
						var radio = dom.querySelector("[name='switch']:checked"),
							iframe = forum.element.jsonp.getElementsByTagName("iframe");
						radio.dataset.url += iframe[0].src+",";
						radio.dataset.img += json.thumbnail_url+",";
						iframe[0].remove();	
					},
					gist : function(json) {
						var self = forum.callback.gist,
							el = dom.getElementById("media"+self.id);
						el.innerHTML += "<link rel=\"stylesheet\" href=\"" + json.stylesheet + "\">" + json.div;
						delete self['id'];
					}
				},
				error : {
					thread : function() {
						
					},
					threads : function() {

					},
					home : function() {

					},
					media : function() {
						
					}
				}
			}
			bom.onload = function() {
				var n = navigator,
				uAgent = n.userAgent.toLowerCase(),
				type = n.appName,
				lang = (type=="Netscape") ? navigator.language : lang = navigator.userLanguage;
				dom.documentElement.lang = forum.api.lang = lang.substr(0,2);

				forum.fn.jsonp("/lang/" + forum.api.lang + ".js");
				forum.init.route();
				forum.init.sesstion();
				
				forum.api.popstate ? bom.onpopstate = function(event) {forum.init.route()} : "";
			}
		})(window, document);
		</script>
	</body>
</html>